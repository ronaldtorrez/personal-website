---
import { StringNoNSchema } from '@schemas/string.ts'
import { cn } from '@utils/css.ts'
import { CldVideoPlayer } from 'astro-cloudinary'
import { z } from 'astro:content'

const VideoSchema = z.object({
	videoId: StringNoNSchema,
	thumbnail: StringNoNSchema.url().optional(),
	class: StringNoNSchema.optional()
})

type Props = z.input<typeof VideoSchema>

const { videoId, thumbnail, class: classes } = VideoSchema.parse(Astro.props as Props)
---

<CldVideoPlayer
	class={cn('rounded-2xl', classes)}
	src={videoId}
	poster={thumbnail}
	width={640}
	height={480}
	autoplay="on-scroll"
	muted={true}
	loop={true}
	controls={false}
	hideContextMenu={true}
	playsinline={true}
/>
